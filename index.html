<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Hawkins Incident Command Console</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="Browser-based incident command console for monitoring strange events in and around Hawkins."
    />
    <style>
      :root {
        --bg: #05060a;
        --bg-alt: #0b0d16;
        --panel: #111320;
        --panel-alt: #151829;
        --accent: #ff3b4e;
        --accent-soft: rgba(255, 59, 78, 0.22);
        --accent-alt: #ffb347;
        --text: #f5f7ff;
        --muted: #8b90b0;
        --border-subtle: #20253a;
        --threat-low: #3fbf6b;
        --threat-medium: #f7b733;
        --threat-critical: #ff3b4e;
        --status-open: #ff3b4e;
        --status-investigating: #f7b733;
        --status-contained: #3fbf6b;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
          sans-serif;
        background: radial-gradient(circle at 0 0, #201022 0, #05060a 55%);
        color: var(--text);
      }

      body {
        display: flex;
        flex-direction: column;
      }

      .shell {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-height: 0;
      }

      .top-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(to right, #05060a, #151829 45%, #05060a);
        border-bottom: 1px solid #272b3f;
        box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
      }

      .top-left {
        display: flex;
        align-items: baseline;
        gap: 0.75rem;
      }

      .brand {
        font-weight: 600;
        letter-spacing: 0.14em;
        text-transform: uppercase;
        font-size: 0.78rem;
        color: #f5657b;
      }

      .subtitle {
        font-size: 0.7rem;
        color: var(--muted);
        text-transform: uppercase;
        letter-spacing: 0.16em;
      }

      .status-pill {
        font-size: 0.7rem;
        padding: 0.2rem 0.55rem;
        border-radius: 999px;
        border: 1px solid rgba(99, 179, 237, 0.7);
        color: #a0d8ff;
        text-transform: uppercase;
        letter-spacing: 0.16em;
        background: radial-gradient(circle at 0 0, #1b2a40 0, #0b1020 55%);
        box-shadow: 0 0 0 1px rgba(10, 45, 80, 0.6);
      }

      .clock {
        font-family: "SF Mono", ui-monospace, Menlo, Monaco, "Cascadia Code",
          monospace;
        font-size: 0.8rem;
        color: var(--muted);
      }

      .layout {
        flex: 1;
        display: grid;
        grid-template-columns: minmax(0, 2.2fr) minmax(0, 2.8fr) minmax(
            260px,
            1.8fr
          );
        gap: 0.75rem;
        padding: 0.75rem 0.9rem 0.9rem;
        min-height: 0;
      }

      .panel {
        background: radial-gradient(circle at 0 0, #1d1d30 0, #101222 50%);
        border-radius: 0.75rem;
        border: 1px solid var(--border-subtle);
        box-shadow: 0 10px 35px rgba(0, 0, 0, 0.75);
        padding: 0.75rem;
        display: flex;
        flex-direction: column;
        min-height: 0;
      }

      .panel-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
        margin-bottom: 0.5rem;
      }

      .panel-title {
        font-size: 0.82rem;
        text-transform: uppercase;
        letter-spacing: 0.18em;
        color: #cbd5ff;
      }

      .panel-subtitle {
        font-size: 0.7rem;
        color: var(--muted);
      }

      .divider {
        height: 1px;
        margin: 0.4rem 0 0.45rem;
        background: linear-gradient(
          to right,
          rgba(255, 255, 255, 0.06),
          rgba(255, 255, 255, 0.02)
        );
      }

      .filters {
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;
        margin-bottom: 0.4rem;
      }

      .chip {
        padding: 0.18rem 0.55rem;
        border-radius: 999px;
        font-size: 0.68rem;
        border: 1px solid rgba(148, 163, 184, 0.45);
        color: var(--muted);
        background: rgba(15, 23, 42, 0.75);
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 0.2rem;
      }

      .chip.active {
        border-color: var(--accent);
        color: #fed7e2;
        background: radial-gradient(circle at 0 0, #3d121a 0, #1b0a0f 60%);
        box-shadow: 0 0 18px rgba(255, 59, 78, 0.55);
      }

      .chip-dot {
        width: 6px;
        height: 6px;
        border-radius: 999px;
        background: currentColor;
      }

      .table-header,
      .incident-row {
        display: grid;
        grid-template-columns: minmax(0, 1.9fr) 0.9fr 0.9fr 1.3fr 0.9fr;
        gap: 0.5rem;
        align-items: center;
        font-size: 0.72rem;
      }

      .table-header {
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: #7c86b0;
        padding: 0.3rem 0.3rem 0.25rem;
      }

      .incident-list {
        overflow: auto;
        padding-right: 0.25rem;
        margin-right: -0.25rem;
      }

      .incident-row {
        padding: 0.35rem 0.4rem;
        border-radius: 0.45rem;
        margin-bottom: 0.18rem;
        background: rgba(15, 23, 42, 0.55);
        border: 1px solid transparent;
        cursor: pointer;
        position: relative;
      }

      .incident-row.active {
        border-color: var(--accent);
        box-shadow: 0 0 0 1px rgba(255, 59, 78, 0.4),
          0 0 24px rgba(255, 59, 78, 0.35);
      }

      .incident-row:hover:not(.active) {
        background: rgba(15, 23, 42, 0.9);
        border-color: rgba(148, 163, 184, 0.35);
      }

      .incident-title {
        font-size: 0.8rem;
        font-weight: 500;
      }

      .pill {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.12rem 0.45rem;
        border-radius: 999px;
        font-size: 0.7rem;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        border: 1px solid transparent;
        white-space: nowrap;
      }

      .pill.threat-low {
        border-color: rgba(63, 191, 107, 0.7);
        color: #b9f6ca;
        background: rgba(22, 101, 52, 0.45);
      }

      .pill.threat-medium {
        border-color: rgba(247, 183, 51, 0.8);
        color: #fef9c3;
        background: rgba(180, 83, 9, 0.5);
      }

      .pill.threat-critical {
        border-color: rgba(255, 59, 78, 0.9);
        color: #fee2e2;
        background: rgba(185, 28, 28, 0.6);
        box-shadow: 0 0 16px rgba(239, 68, 68, 0.7);
      }

      .pill.status-open {
        border-color: rgba(248, 113, 113, 0.8);
        color: #fecaca;
        background: rgba(153, 27, 27, 0.6);
      }

      .pill.status-investigating {
        border-color: rgba(250, 204, 21, 0.85);
        color: #fef3c7;
        background: rgba(133, 77, 14, 0.6);
      }

      .pill.status-contained {
        border-color: rgba(34, 197, 94, 0.9);
        color: #dcfce7;
        background: rgba(22, 101, 52, 0.6);
      }

      .timestamp {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        font-size: 0.7rem;
        color: var(--muted);
      }

      .threat-indicator {
        display: inline-flex;
        align-items: center;
        gap: 0.2rem;
      }

      .threat-dot {
        width: 7px;
        height: 14px;
        border-radius: 999px;
        background: linear-gradient(to bottom, #fecaca, #ef4444);
        box-shadow: 0 0 12px rgba(239, 68, 68, 0.9);
      }

      .details-body {
        flex: 1;
        display: grid;
        grid-template-rows: auto auto 1fr auto;
        gap: 0.5rem;
        min-height: 0;
      }

      .classification-bar {
        display: flex;
        justify-content: space-between;
        font-size: 0.68rem;
        text-transform: uppercase;
        letter-spacing: 0.18em;
        color: #fecaca;
        background: repeating-linear-gradient(
            -45deg,
            rgba(127, 29, 29, 0.6),
            rgba(127, 29, 29, 0.6) 8px,
            rgba(127, 29, 29, 0.2) 8px,
            rgba(127, 29, 29, 0.2) 16px
          ),
          radial-gradient(circle at 0 0, #3f1515 0, #1b0b0b 65%);
        border-radius: 0.5rem;
        padding: 0.35rem 0.6rem;
        border: 1px solid rgba(248, 113, 113, 0.85);
        box-shadow: 0 0 26px rgba(220, 38, 38, 0.8);
      }

      .detail-meta {
        display: grid;
        grid-template-columns: repeat(3, minmax(0, 1fr));
        gap: 0.4rem;
        font-size: 0.72rem;
      }

      .meta-block {
        background: rgba(15, 23, 42, 0.8);
        border-radius: 0.45rem;
        padding: 0.38rem 0.45rem;
        border: 1px dashed rgba(148, 163, 184, 0.55);
      }

      .meta-label {
        font-size: 0.64rem;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: #9ca3c5;
        margin-bottom: 0.18rem;
      }

      .meta-value {
        font-size: 0.78rem;
      }

      .detail-scroll {
        background: rgba(15, 23, 42, 0.75);
        border-radius: 0.5rem;
        border: 1px solid rgba(51, 65, 85, 0.8);
        padding: 0.45rem 0.55rem;
        overflow: auto;
        font-size: 0.78rem;
        line-height: 1.4;
      }

      .tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.28rem;
        margin-top: 0.3rem;
      }

      .tag {
        padding: 0.12rem 0.4rem;
        border-radius: 999px;
        border: 1px solid rgba(148, 163, 184, 0.5);
        font-size: 0.68rem;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        color: #a5b4fc;
        background: rgba(30, 64, 175, 0.35);
      }

      .recommended-action {
        margin-top: 0.45rem;
        font-size: 0.76rem;
        color: #e5e7eb;
        padding-top: 0.3rem;
        border-top: 1px dashed rgba(55, 65, 81, 0.85);
      }

      .action-label {
        text-transform: uppercase;
        letter-spacing: 0.16em;
        font-size: 0.65rem;
        color: #9ca3c5;
        margin-bottom: 0.18rem;
        display: block;
      }

      .detail-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.7rem;
        color: var(--muted);
      }

      .threat-meter {
        background: radial-gradient(circle at 0 0, #1f2937 0, #020617 90%);
        border-radius: 0.75rem;
        padding: 0.65rem 0.65rem 0.6rem;
        border: 1px solid rgba(55, 65, 81, 0.95);
        box-shadow: 0 0 26px rgba(15, 23, 42, 0.9);
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
      }

      .threat-header {
        display: flex;
        justify-content: space-between;
        align-items: baseline;
      }

      .threat-label {
        font-size: 0.7rem;
        text-transform: uppercase;
        letter-spacing: 0.18em;
        color: #e5e7eb;
      }

      .threat-value {
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
        font-size: 0.88rem;
        color: #fee2e2;
      }

      .meter-track {
        position: relative;
        height: 0.65rem;
        border-radius: 999px;
        background: linear-gradient(
          to right,
          rgba(22, 163, 74, 0.3),
          rgba(250, 204, 21, 0.25),
          rgba(239, 68, 68, 0.4)
        );
        overflow: hidden;
      }

      .meter-fill {
        position: absolute;
        inset: 0;
        width: 40%;
        background: linear-gradient(
          to right,
          rgba(74, 222, 128, 0.4),
          rgba(250, 204, 21, 0.6),
          rgba(239, 68, 68, 0.95)
        );
        box-shadow: 0 0 22px rgba(248, 113, 113, 0.9);
        transition: width 240ms ease-out;
      }

      .meter-marker {
        position: absolute;
        top: -0.18rem;
        width: 2px;
        height: 1rem;
        border-radius: 999px;
        background: #fef3c7;
        box-shadow: 0 0 12px rgba(250, 250, 210, 0.8);
        transform: translateX(-50%);
        transition: left 240ms ease-out;
      }

      .threat-scale {
        display: flex;
        justify-content: space-between;
        font-size: 0.65rem;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        color: #9ca3c5;
      }

      .breach-warning {
        margin-top: 0.25rem;
        font-size: 0.74rem;
        color: #fee2e2;
        background: rgba(127, 29, 29, 0.6);
        border-radius: 0.45rem;
        border: 1px solid rgba(220, 38, 38, 0.9);
        padding: 0.35rem 0.45rem;
        display: flex;
        align-items: center;
        gap: 0.4rem;
        box-shadow: 0 0 20px rgba(220, 38, 38, 0.85);
      }

      .breach-indicator {
        width: 10px;
        height: 18px;
        border-radius: 999px;
        background: repeating-linear-gradient(
          -45deg,
          #fecaca,
          #fecaca 4px,
          #991b1b 4px,
          #991b1b 8px
        );
        box-shadow: 0 0 14px rgba(248, 113, 113, 1);
      }

      .hotkeys {
        background: rgba(15, 23, 42, 0.9);
        border-radius: 0.6rem;
        border: 1px dashed rgba(71, 85, 105, 0.9);
        padding: 0.45rem 0.55rem;
        font-size: 0.7rem;
      }

      .hotkey-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: 0.24rem;
      }

      .kbd {
        border-radius: 0.25rem;
        border: 1px solid rgba(148, 163, 184, 0.7);
        background: rgba(15, 23, 42, 0.9);
        padding: 0.09rem 0.35rem;
        font-size: 0.7rem;
        font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
          "Liberation Mono", "Courier New", monospace;
      }

      .form {
        display: grid;
        gap: 0.4rem;
        font-size: 0.76rem;
      }

      .form-row {
        display: grid;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 0.4rem;
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 0.16rem;
      }

      .label {
        font-size: 0.68rem;
        text-transform: uppercase;
        letter-spacing: 0.14em;
        color: #9ca3c5;
      }

      input,
      select,
      textarea {
        font: inherit;
        color: inherit;
        background: rgba(15, 23, 42, 0.9);
        border-radius: 0.35rem;
        border: 1px solid rgba(55, 65, 81, 0.9);
        padding: 0.3rem 0.4rem;
        outline: none;
        transition: border 120ms ease, box-shadow 120ms ease,
          background 120ms ease;
      }

      input:focus,
      select:focus,
      textarea:focus {
        border-color: var(--accent);
        box-shadow: 0 0 0 1px rgba(248, 113, 113, 0.7);
        background: rgba(15, 23, 42, 0.95);
      }

      textarea {
        min-height: 82px;
        resize: vertical;
      }

      .submit-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 0.2rem;
      }

      .btn-primary {
        border-radius: 999px;
        padding: 0.32rem 0.9rem;
        font-size: 0.78rem;
        border: 1px solid rgba(248, 113, 113, 0.9);
        text-transform: uppercase;
        letter-spacing: 0.14em;
        background: radial-gradient(circle at 0 0, #7f1d1d 0, #1b0a0f 70%);
        color: #fee2e2;
        cursor: pointer;
        box-shadow: 0 0 10px rgba(248, 113, 113, 0.9);
      }

      .btn-primary:hover {
        box-shadow: 0 0 18px rgba(248, 113, 113, 1);
        transform: translateY(-0.5px);
      }

      .confirmation {
        font-size: 0.7rem;
        color: #bbf7d0;
        opacity: 0;
        transform: translateY(2px);
        transition: opacity 180ms ease, transform 180ms ease;
      }

      .confirmation.visible {
        opacity: 1;
        transform: translateY(0);
      }

      .footer {
        padding: 0.35rem 1rem 0.55rem;
        font-size: 0.68rem;
        color: var(--muted);
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-top: 1px solid rgba(30, 64, 175, 0.45);
        background: radial-gradient(circle at 100% 100%, #161927 0, #020617 70%);
      }

      .mode-indicator {
        display: inline-flex;
        align-items: center;
        gap: 0.28rem;
      }

      .mode-dot {
        width: 9px;
        height: 9px;
        border-radius: 999px;
        background: radial-gradient(circle at 30% 30%, #facc15, #b91c1c);
        box-shadow: 0 0 14px rgba(248, 113, 113, 0.9);
      }

      /* Upside Down Mode */
      body.upside-down {
        background: radial-gradient(circle at 0 100%, #020617 0, #000 55%);
        color: #e5e7eb;
        filter: contrast(1.02) saturate(1.1);
      }

      body.upside-down .panel {
        background: radial-gradient(circle at 0 0, #070711 0, #020617 70%);
        border-color: #1f2937;
        box-shadow: 0 0 40px rgba(15, 23, 42, 0.95);
      }

      body.upside-down .incident-row {
        background: rgba(15, 23, 42, 0.95);
        border-color: rgba(148, 163, 184, 0.4);
      }

      body.upside-down .incident-row:hover:not(.active) {
        background: rgba(15, 23, 42, 1);
        border-color: rgba(148, 163, 184, 0.7);
      }

      body.upside-down .classification-bar {
        filter: hue-rotate(-25deg) saturate(1.2);
      }

      body.upside-down .threat-meter {
        background: radial-gradient(circle at 0 0, #020617 0, #0f172a 75%);
      }

      body.upside-down .meter-fill {
        animation: pulse 1.4s ease-in-out infinite alternate;
      }

      body.upside-down .incident-row[data-threat="Critical"] {
        box-shadow: 0 0 30px rgba(248, 113, 113, 0.9);
        transform: translateY(-0.5px);
      }

      @keyframes pulse {
        from {
          box-shadow: 0 0 16px rgba(248, 113, 113, 0.7);
        }
        to {
          box-shadow: 0 0 30px rgba(248, 113, 113, 1);
        }
      }

      @media (max-width: 1120px) {
        .layout {
          grid-template-columns: minmax(0, 2.2fr) minmax(0, 2.6fr);
          grid-template-rows: minmax(260px, 1.4fr) minmax(0, 2.2fr);
          grid-template-areas:
            "list threat"
            "details details";
        }

        .panel.list {
          grid-area: list;
        }

        .panel.details {
          grid-area: details;
        }

        .panel.sidebar {
          grid-area: threat;
        }
      }

      @media (max-width: 768px) {
        .top-bar {
          flex-direction: column;
          align-items: flex-start;
          gap: 0.35rem;
        }

        .layout {
          grid-template-columns: minmax(0, 1fr);
          grid-template-rows: minmax(0, 1fr) auto auto;
        }
      }
    </style>
  </head>
  <body>
    <div class="shell">
      <header class="top-bar">
        <div class="top-left">
          <div>
            <div class="brand">Hawkins Incident Command Console</div>
            <div class="subtitle">Anomaly Monitoring &amp; Threat Response Grid</div>
          </div>
          <span class="status-pill">Status: Online</span>
        </div>
        <div class="clock" id="clock"></div>
      </header>

      <main class="layout">
        <!-- Incident List -->
        <section class="panel list">
          <div class="panel-header">
            <div>
              <div class="panel-title">Incident Feed</div>
              <div class="panel-subtitle">
                Logged anomalies across Hawkins jurisdiction
              </div>
            </div>
          </div>
          <div class="divider"></div>

          <div class="filters">
            <button class="chip active" data-threat-filter="All">
              <span class="chip-dot"></span> All
            </button>
            <button class="chip" data-threat-filter="Low">
              <span class="chip-dot" style="background: var(--threat-low)"></span>
              Low
            </button>
            <button class="chip" data-threat-filter="Medium">
              <span
                class="chip-dot"
                style="background: var(--threat-medium)"
              ></span>
              Medium
            </button>
            <button class="chip" data-threat-filter="Critical">
              <span
                class="chip-dot"
                style="background: var(--threat-critical)"
              ></span>
              Critical
            </button>
            <button class="chip" data-status-filter="Open">Open</button>
            <button class="chip" data-status-filter="Investigating">
              Investigating
            </button>
            <button class="chip" data-status-filter="Contained">
              Contained
            </button>
            <button class="chip" id="sortToggle" data-sort="desc">
              Latest ⬇
            </button>
          </div>

          <div class="table-header">
            <span>Incident</span>
            <span>Threat</span>
            <span>Status</span>
            <span>Location</span>
            <span>Logged</span>
          </div>
          <div class="incident-list" id="incidentList"></div>
        </section>

        <!-- Details Panel -->
        <section class="panel details">
          <div class="panel-header">
            <div>
              <div class="panel-title">Classified Incident File</div>
              <div class="panel-subtitle">
                Restricted operational details &amp; recommended actions
              </div>
            </div>
            <div class="threat-indicator">
              <div class="threat-dot"></div>
              <span
                style="
                  font-size: 0.7rem;
                  text-transform: uppercase;
                  letter-spacing: 0.18em;
                  color: #fecaca;
                "
              >
                Red Channel
              </span>
            </div>
          </div>
          <div class="divider"></div>

          <div class="details-body">
            <div class="classification-bar">
              <span> Clearance Level: Delta-Red </span>
              <span> Unauthorized access will be logged </span>
            </div>

            <div class="detail-meta">
              <div class="meta-block">
                <div class="meta-label">Incident Title</div>
                <div class="meta-value" id="detailTitle">
                  Select an incident from the feed
                </div>
              </div>
              <div class="meta-block">
                <div class="meta-label">Assigned Officer</div>
                <div class="meta-value" id="detailOfficer">—</div>
              </div>
              <div class="meta-block">
                <div class="meta-label">Status &amp; Threat</div>
                <div class="meta-value" id="detailStatusThreat">—</div>
              </div>
            </div>

            <div class="detail-scroll">
              <div id="detailDescription">
                Use the left-hand feed to open a classified incident file.
                Details will populate here, including observed anomalies,
                civilian reports, and recommended next steps.
              </div>
              <div class="tags" id="detailTags"></div>
              <div class="recommended-action" id="detailAction">
                <span class="action-label">Recommended Action</span>
                <span>
                  Await incident selection to view operational directives.
                </span>
              </div>
            </div>

            <div class="detail-footer">
              <span id="detailMeta">No incident selected.</span>
              <span>Logs are simulated &mdash; no real data is stored.</span>
            </div>
          </div>
        </section>

        <!-- Sidebar: Threat Meter + New Incident -->
        <aside class="panel sidebar">
          <div class="threat-meter">
            <div class="threat-header">
              <div class="threat-label">Hawkins Threat Level</div>
              <div class="threat-value" id="threatValue">MEDIUM</div>
            </div>

            <div class="meter-track">
              <div class="meter-fill" id="meterFill"></div>
              <div class="meter-marker" id="meterMarker" style="left: 48%"></div>
            </div>

            <div class="threat-scale">
              <span>Low</span>
              <span>Medium</span>
              <span>Critical</span>
            </div>

            <div
              class="breach-warning"
              id="breachWarning"
              style="display: none"
            >
              <div class="breach-indicator"></div>
              <div>
                <div
                  style="
                    text-transform: uppercase;
                    letter-spacing: 0.18em;
                    font-size: 0.65rem;
                    margin-bottom: 0.08rem;
                  "
                >
                  Reality Breach Imminent
                </div>
                <div style="font-size: 0.7rem">
                  Critical incidents exceed safe thresholds. Initiate containment
                  protocols.
                </div>
              </div>
            </div>
          </div>

          <div class="hotkeys" style="margin-top: 0.45rem">
            <div class="hotkey-row">
              <span>Toggle Upside Down Mode</span>
              <span class="kbd">U</span>
            </div>
            <div class="hotkey-row">
              <span>New Incident Focus</span>
              <span class="kbd">N</span>
            </div>
            <div class="hotkey-row">
              <span>Cycle Sort Order</span>
              <span class="kbd">S</span>
            </div>
          </div>

          <div class="divider" style="margin-top: 0.55rem"></div>

          <form class="form" id="incidentForm" autocomplete="off">
            <div class="panel-subtitle" style="margin-bottom: 0.1rem">
              Log New Incident
            </div>

            <div class="field">
              <label class="label" for="titleInput">Title</label>
              <input
                id="titleInput"
                name="title"
                required
                placeholder="Eg. Power surge near Byers residence"
              />
            </div>

            <div class="form-row">
              <div class="field">
                <label class="label" for="locationInput">Location</label>
                <input
                  id="locationInput"
                  name="location"
                  required
                  placeholder="Hawkins National Laboratory"
                />
              </div>
              <div class="field">
                <label class="label" for="officerInput">Assigned Officer</label>
                <input
                  id="officerInput"
                  name="officer"
                  placeholder="Chief Hopper"
                />
              </div>
            </div>

            <div class="form-row">
              <div class="field">
                <label class="label" for="threatInput">Threat Level</label>
                <select id="threatInput" name="threat" required>
                  <option value="Low">Low</option>
                  <option value="Medium" selected>Medium</option>
                  <option value="Critical">Critical</option>
                </select>
              </div>
              <div class="field">
                <label class="label" for="statusInput">Status</label>
                <select id="statusInput" name="status" required>
                  <option value="Open" selected>Open</option>
                  <option value="Investigating">Investigating</option>
                  <option value="Contained">Contained</option>
                </select>
              </div>
            </div>

            <div class="field">
              <label class="label" for="descriptionInput">Description</label>
              <textarea
                id="descriptionInput"
                name="description"
                placeholder="Summarize observed anomalies, civilian sightings, and environmental changes."
              ></textarea>
            </div>

            <div class="submit-row">
              <button type="submit" class="btn-primary">Add Incident</button>
              <div class="confirmation" id="confirmation">
                Incident logged to console.
              </div>
            </div>
          </form>
        </aside>
      </main>

      <footer class="footer">
        <span class="mode-indicator">
          <span class="mode-dot"></span>
          <span id="modeLabel">Standard Operations Grid</span>
        </span>
        <span>All activity is simulated for demonstration purposes only.</span>
      </footer>
    </div>

    <script>
      const INCIDENT_STORAGE_KEY = "hawkins_incidents_v1";

      const incidentListEl = document.getElementById("incidentList");
      const sortToggleEl = document.getElementById("sortToggle");
      const incidentForm = document.getElementById("incidentForm");
      const confirmationEl = document.getElementById("confirmation");
      const clockEl = document.getElementById("clock");
      const threatValueEl = document.getElementById("threatValue");
      const meterFillEl = document.getElementById("meterFill");
      const meterMarkerEl = document.getElementById("meterMarker");
      const breachWarningEl = document.getElementById("breachWarning");
      const modeLabelEl = document.getElementById("modeLabel");

      const detailTitleEl = document.getElementById("detailTitle");
      const detailOfficerEl = document.getElementById("detailOfficer");
      const detailStatusThreatEl =
        document.getElementById("detailStatusThreat");
      const detailDescriptionEl = document.getElementById("detailDescription");
      const detailTagsEl = document.getElementById("detailTags");
      const detailActionEl = document.getElementById("detailAction");
      const detailMetaEl = document.getElementById("detailMeta");

      const titleInput = document.getElementById("titleInput");

      let incidents = [];
      let activeIncidentId = null;
      let threatFilter = "All";
      let statusFilter = null;
      let sortDirection = "desc";

      function seedIncidents() {
        return [
          {
            id: "i1",
            title: "Unscheduled power grid spike near forest perimeter",
            location: "Mirkwood Forest Access Road",
            threat: "Medium",
            status: "Investigating",
            officer: "Chief Hopper",
            description:
              "Multiple residents reported synchronized power flickers and radio static near the forest perimeter. Patrol units detected brief electromagnetic interference on band 3, followed by a sudden temperature drop of 7°F over 3 minutes.",
            tags: ["Power anomaly", "EM interference", "Civilians unaffected"],
            createdAt: Date.now() - 1000 * 60 * 60 * 4,
          },
          {
            id: "i2",
            title: "Structural breach signatures beneath laboratory sub-levels",
            location: "Hawkins National Laboratory - Sublevel C",
            threat: "Critical",
            status: "Open",
            officer: "Dr. Owens",
            description:
              "Sensors flagged repeating seismic micro-spikes centered below decommissioned test chambers. Infrared sweeps show pockets of air significantly colder than surrounding concrete, forming a ring pattern consistent with prior breach events.",
            tags: [
              "Dimensional stress",
              "Seismic irregularity",
              "High containment risk",
            ],
            createdAt: Date.now() - 1000 * 60 * 60 * 1.8,
          },
          {
            id: "i3",
            title: "Missing persons cluster near abandoned rail yard",
            location: "East Hawkins Rail Yard",
            threat: "Critical",
            status: "Investigating",
            officer: "Hawkins PD",
            description:
              "Three separate missing person reports within 24 hours, all last seen traveling along the same access road. Patrol discovered elongated shadow impressions on pavement with no corresponding light source. Ambient sound levels drop significantly near loading bay 4.",
            tags: ["Missing persons", "Acoustic anomaly", "Night-time activity"],
            createdAt: Date.now() - 1000 * 60 * 60 * 8,
          },
          {
            id: "i4",
            title: "Nocturnal screeching and claw scoring on water tower",
            location: "Sattler Water Tower",
            threat: "Medium",
            status: "Open",
            officer: "Deputy Powell",
            description:
              "Residents reported metallic screeching echoing between 01:00–01:15. Inspection revealed fresh, parallel scoring marks 20 feet above the main ladder access. No known equipment or vehicles were logged in the vicinity.",
            tags: ["Unknown lifeform", "Acoustic anomaly"],
            createdAt: Date.now() - 1000 * 60 * 60 * 20,
          },
          {
            id: "i5",
            title: "Localized static haze over cornfields",
            location: "Hargrove Farm Perimeter",
            threat: "Low",
            status: "Contained",
            officer: "Rural Patrol Unit",
            description:
              "A faint, flickering haze was observed hovering above the northern crop line. Small animals avoided the field boundary during the event. Haze dissipated after 9 minutes with no visible residue.",
            tags: ["Visual anomaly", "Short duration", "Low immediate risk"],
            createdAt: Date.now() - 1000 * 60 * 60 * 36,
          },
        ];
      }

      function loadIncidents() {
        try {
          const stored = localStorage.getItem(INCIDENT_STORAGE_KEY);
          if (!stored) {
            incidents = seedIncidents();
            saveIncidents();
          } else {
            const parsed = JSON.parse(stored);
            if (Array.isArray(parsed) && parsed.length) {
              incidents = parsed;
            } else {
              incidents = seedIncidents();
            }
          }
        } catch (e) {
          incidents = seedIncidents();
        }
      }

      function saveIncidents() {
        try {
          localStorage.setItem(INCIDENT_STORAGE_KEY, JSON.stringify(incidents));
        } catch (e) {}
      }

      function formatTimestamp(ts) {
        const d = new Date(ts);
        return (
          d.toLocaleDateString(undefined, {
            month: "short",
            day: "2-digit",
          }) +
          " " +
          d.toLocaleTimeString(undefined, {
            hour: "2-digit",
            minute: "2-digit",
          })
        );
      }

      function updateClock() {
        const now = new Date();
        const formatted = now.toLocaleString(undefined, {
          weekday: "short",
          year: "numeric",
          month: "short",
          day: "2-digit",
          hour: "2-digit",
          minute: "2-digit",
          second: "2-digit",
        });
        clockEl.textContent = formatted.toUpperCase();
      }

      function matchesFilters(incident) {
        if (threatFilter !== "All" && incident.threat !== threatFilter) {
          return false;
        }
        if (statusFilter && incident.status !== statusFilter) {
          return false;
        }
        return true;
      }

      function sortIncidents(list) {
        return list.slice().sort((a, b) => {
          return sortDirection === "desc"
            ? b.createdAt - a.createdAt
            : a.createdAt - b.createdAt;
        });
      }

      function renderIncidents() {
        const filtered = sortIncidents(incidents).filter(matchesFilters);
        incidentListEl.innerHTML = "";

        if (!filtered.length) {
          const empty = document.createElement("div");
          empty.style.padding = "0.6rem 0.4rem";
          empty.style.fontSize = "0.75rem";
          empty.style.color = "#9ca3c5";
          empty.textContent = "No incidents match the current filters.";
          incidentListEl.appendChild(empty);
          updateThreatMeter();
          return;
        }

        filtered.forEach((incident) => {
          const row = document.createElement("div");
          row.className = "incident-row";
          row.dataset.id = incident.id;
          row.dataset.threat = incident.threat;

          if (incident.id === activeIncidentId) {
            row.classList.add("active");
          }

          row.innerHTML = `
            <div class="incident-title">${incident.title}</div>
            <div>
              <span class="pill threat-${incident.threat.toLowerCase()}">
                ${incident.threat}
              </span>
            </div>
            <div>
              <span class="pill status-${incident.status.toLowerCase()}">
                ${incident.status}
              </span>
            </div>
            <div style="font-size: 0.72rem; color: var(--muted);">
              ${incident.location}
            </div>
            <div class="timestamp">
              ${formatTimestamp(incident.createdAt)}
            </div>
          `;

          row.addEventListener("click", () => {
            activeIncidentId = incident.id;
            renderIncidents();
            renderDetail(incident);
          });

          incidentListEl.appendChild(row);
        });

        updateThreatMeter();
      }

      function autoTags(incident) {
        const tags = new Set(incident.tags || []);
        if (incident.threat === "Critical") {
          tags.add("High priority");
          tags.add("Reality breach risk");
        }
        if (incident.status === "Open") {
          tags.add("Immediate review");
        }
        if (/missing/i.test(incident.title + incident.description)) {
          tags.add("Civilian impact");
        }
        return Array.from(tags);
      }

      function suggestedAction(incident) {
        if (incident.threat === "Critical") {
          return "Deploy containment units, restrict civilian access within a 3-mile radius, and maintain continuous monitoring until anomaly stabilizes.";
        }
        if (incident.threat === "Medium") {
          return "Assign dedicated patrol, capture environmental telemetry, and schedule follow-up sweep within the next 6 hours.";
        }
        return "Log observations, collect resident statements, and flag area for low-frequency monitoring.";
      }

      function renderDetail(incident) {
        if (!incident) {
          detailTitleEl.textContent = "Select an incident from the feed";
          detailOfficerEl.textContent = "—";
          detailStatusThreatEl.textContent = "—";
          detailDescriptionEl.textContent =
            "Use the left-hand feed to open a classified incident file. Details will populate here, including observed anomalies, civilian reports, and recommended next steps.";
          detailTagsEl.innerHTML = "";
          detailActionEl.innerHTML =
            '<span class="action-label">Recommended Action</span><span>Await incident selection to view operational directives.</span>';
          detailMetaEl.textContent = "No incident selected.";
          return;
        }

        detailTitleEl.textContent = incident.title;
        detailOfficerEl.textContent = incident.officer || "Unassigned";
        detailStatusThreatEl.textContent = `${incident.status} \u00b7 ${incident.threat}`;
        detailDescriptionEl.textContent = incident.description || "No description provided.";

        const tags = autoTags(incident);
        detailTagsEl.innerHTML = "";
        tags.forEach((tag) => {
          const el = document.createElement("span");
          el.className = "tag";
          el.textContent = tag;
          detailTagsEl.appendChild(el);
        });

        detailActionEl.innerHTML = `
          <span class="action-label">Recommended Action</span>
          <span>${suggestedAction(incident)}</span>
        `;

        detailMetaEl.textContent = `Logged ${formatTimestamp(
          incident.createdAt
        )} \u00b7 ${incident.location}`;
      }

      function updateThreatMeter() {
        if (!incidents.length) {
          threatValueEl.textContent = "LOW";
          meterFillEl.style.width = "20%";
          meterMarkerEl.style.left = "20%";
          breachWarningEl.style.display = "none";
          return;
        }

        const weights = { Low: 1, Medium: 3, Critical: 7 };
        const totalWeight = incidents.reduce(
          (sum, inc) => sum + (weights[inc.threat] || 1),
          0
        );
        const maxPossible = incidents.length * weights["Critical"];
        const ratio = maxPossible ? totalWeight / maxPossible : 0;
        const percent = 20 + ratio * 70;

        meterFillEl.style.width = `${percent}%`;
        meterMarkerEl.style.left = `${percent}%`;

        let label = "LOW";
        if (ratio > 0.35 && ratio <= 0.7) {
          label = "MEDIUM";
        } else if (ratio > 0.7) {
          label = "CRITICAL";
        }
        threatValueEl.textContent = label;

        breachWarningEl.style.display = ratio > 0.7 ? "flex" : "none";
      }

      function handleFormSubmit(event) {
        event.preventDefault();
        const formData = new FormData(incidentForm);
        const now = Date.now();
        const incident = {
          id: "i" + now.toString(36),
          title: (formData.get("title") || "").toString().trim(),
          location: (formData.get("location") || "").toString().trim(),
          threat: formData.get("threat") || "Medium",
          status: formData.get("status") || "Open",
          officer: (formData.get("officer") || "").toString().trim(),
          description: (formData.get("description") || "").toString().trim(),
          tags: [],
          createdAt: now,
        };

        incidents.push(incident);
        saveIncidents();
        activeIncidentId = incident.id;
        renderIncidents();
        renderDetail(incident);

        incidentForm.reset();
        document.getElementById("threatInput").value = incident.threat;
        document.getElementById("statusInput").value = incident.status;

        confirmationEl.classList.add("visible");
        setTimeout(() => {
          confirmationEl.classList.remove("visible");
        }, 1600);
      }

      function initFilters() {
        const chips = Array.from(document.querySelectorAll(".chip"));
        chips.forEach((chip) => {
          const threat = chip.dataset.threatFilter;
          const status = chip.dataset.statusFilter;

          if (!threat && !status && chip !== sortToggleEl) {
            return;
          }

          chip.addEventListener("click", () => {
            if (threat) {
              if (threatFilter === threat) {
                threatFilter = "All";
              } else {
                threatFilter = threat;
              }
              chips
                .filter((c) => c.dataset.threatFilter)
                .forEach((c) => c.classList.toggle("active", false));
              const match = chips.find(
                (c) => c.dataset.threatFilter === threatFilter
              );
              if (match) match.classList.add("active");
            }
            if (status) {
              statusFilter = statusFilter === status ? null : status;
              chips
                .filter((c) => c.dataset.statusFilter)
                .forEach((c) =>
                  c.classList.toggle("active", c.dataset.statusFilter === statusFilter)
                );
            }
            renderIncidents();
          });
        });

        sortToggleEl.addEventListener("click", () => {
          sortDirection = sortDirection === "desc" ? "asc" : "desc";
          sortToggleEl.dataset.sort = sortDirection;
          sortToggleEl.textContent = sortDirection === "desc" ? "Latest ⬇" : "Oldest ⬆";
          renderIncidents();
        });
      }

      function initKeyboard() {
        document.addEventListener("keydown", (event) => {
          if (event.repeat) return;
          const key = event.key.toLowerCase();

          if (key === "u") {
            document.body.classList.toggle("upside-down");
            const enabled = document.body.classList.contains("upside-down");
            modeLabelEl.textContent = enabled
              ? "Upside Down Mode \u00b7 Visual Distortion Active"
              : "Standard Operations Grid";
          } else if (key === "n") {
            titleInput.focus();
          } else if (key === "s") {
            sortToggleEl.click();
          }
        });
      }

      function init() {
        loadIncidents();
        initFilters();
        initKeyboard();
        renderIncidents();
        renderDetail(null);
        updateClock();
        setInterval(updateClock, 1000);

        incidentForm.addEventListener("submit", handleFormSubmit);
      }

      init();
    </script>
  </body>
</html>


